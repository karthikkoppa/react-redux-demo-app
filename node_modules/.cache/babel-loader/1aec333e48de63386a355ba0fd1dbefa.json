{"ast":null,"code":"import _classCallCheck from\"/Users/kaknz/Desktop/project/project/git/react-redux-demo-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/kaknz/Desktop/project/project/git/react-redux-demo-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/kaknz/Desktop/project/project/git/react-redux-demo-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _createSuper from\"/Users/kaknz/Desktop/project/project/git/react-redux-demo-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/Users/kaknz/Desktop/project/project/git/react-redux-demo-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import{connect}from\"react-redux\";import XLSX from\"xlsx\";import{setTable}from\"../reducers\";var FileUpload=/*#__PURE__*/function(_React$Component){_inherits(FileUpload,_React$Component);var _super=_createSuper(FileUpload);function FileUpload(props){var _this;_classCallCheck(this,FileUpload);_this=_super.call(this,props);_this.handleFile=_this.handleFile.bind(_assertThisInitialized(_this));return _this;}_createClass(FileUpload,[{key:\"handleFile\",value:function handleFile(file){var _this2=this;var reader=new FileReader();var rABS=!!reader.readAsBinaryString;reader.onload=function(_ref){var result=_ref.target.result;var wb=XLSX.read(result,{type:rABS?\"binary\":\"array\"});var wsname=wb.SheetNames[0];var ws=wb.Sheets[wsname];var data=XLSX.utils.sheet_to_json(ws,{header:1});_this2.props.setTable(data);};if(rABS)reader.readAsBinaryString(file);else reader.readAsArrayBuffer(file);}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(DataInput,{handleFile:this.handleFile});}}]);return FileUpload;}(React.Component);var mapDispatchToProps={setTable:setTable};export default connect(null,mapDispatchToProps)(FileUpload);var DataInput=/*#__PURE__*/function(_React$Component2){_inherits(DataInput,_React$Component2);var _super2=_createSuper(DataInput);function DataInput(props){var _this3;_classCallCheck(this,DataInput);_this3=_super2.call(this,props);_this3.handleChange=_this3.handleChange.bind(_assertThisInitialized(_this3));_this3.fileInput=React.createRef();return _this3;}_createClass(DataInput,[{key:\"handleChange\",value:function handleChange(e){var files=e.target.files;if(files&&files[0])this.props.handleFile(files[0]);}},{key:\"render\",value:function render(){var _this4=this;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"button\",{style:{marginLeft:10},onClick:function onClick(){return _this4.fileInput.current.click();}},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-upload\"}),\"\\xA0 Upload & Publish\"),/*#__PURE__*/React.createElement(\"input\",{ref:this.fileInput,type:\"file\",hidden:true,accept:SheetJSFT,onChange:this.handleChange}));}}]);return DataInput;}(React.Component);var SheetJSFT=[\"xlsx\",\"xlsb\",\"xlsm\",\"xls\",\"xml\",\"csv\",\"txt\",\"ods\",\"fods\",\"uos\",\"sylk\",\"dif\",\"dbf\",\"prn\",\"qpw\",\"123\",\"wb*\",\"wq*\",\"html\",\"htm\"].map(function(x){return\".\"+x;}).join(\",\");","map":{"version":3,"sources":["/Users/kaknz/Desktop/project/project/git/react-redux-demo-app/src/upload/FileUpload.js"],"names":["React","connect","XLSX","setTable","FileUpload","props","handleFile","bind","file","reader","FileReader","rABS","readAsBinaryString","onload","result","target","wb","read","type","wsname","SheetNames","ws","Sheets","data","utils","sheet_to_json","header","readAsArrayBuffer","Component","mapDispatchToProps","DataInput","handleChange","fileInput","createRef","e","files","marginLeft","current","click","SheetJSFT","map","x","join"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { connect } from \"react-redux\";\nimport XLSX from \"xlsx\";\nimport { setTable } from \"../reducers\";\n\nclass FileUpload extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleFile = this.handleFile.bind(this);\n  }\n  handleFile(file) {\n    \n    const reader = new FileReader();\n    const rABS = !!reader.readAsBinaryString;\n    reader.onload = ({ target: { result } }) => {\n      const wb = XLSX.read(result, { type: rABS ? \"binary\" : \"array\" });\n      const wsname = wb.SheetNames[0];\n      const ws = wb.Sheets[wsname];\n      const data = XLSX.utils.sheet_to_json(ws, { header: 1 });\n      \n      this.props.setTable(data);\n    };\n    if (rABS) reader.readAsBinaryString(file);\n    else reader.readAsArrayBuffer(file);\n  }\n  render() {\n    return <DataInput handleFile={this.handleFile} />;\n  }\n}\n\nconst mapDispatchToProps = {\n  setTable\n};\n\nexport default connect(\n  null,\n  mapDispatchToProps\n)(FileUpload);\n\nclass DataInput extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleChange = this.handleChange.bind(this);\n    this.fileInput = React.createRef();\n  }\n  handleChange(e) {\n    const files = e.target.files;\n    if (files && files[0]) this.props.handleFile(files[0]);\n  }\n  render() {\n    return (\n      <>\n        <button\n          style={{ marginLeft: 10 }}\n          onClick={() => this.fileInput.current.click()}\n        >\n          <i className=\"fas fa-upload\" />\n          &nbsp; Upload & Publish\n        </button>\n        <input\n          ref={this.fileInput}\n          type=\"file\"\n          hidden\n          accept={SheetJSFT}\n          onChange={this.handleChange}\n        />\n      </>\n    );\n  }\n}\n\nconst SheetJSFT = [\n  \"xlsx\",\n  \"xlsb\",\n  \"xlsm\",\n  \"xls\",\n  \"xml\",\n  \"csv\",\n  \"txt\",\n  \"ods\",\n  \"fods\",\n  \"uos\",\n  \"sylk\",\n  \"dif\",\n  \"dbf\",\n  \"prn\",\n  \"qpw\",\n  \"123\",\n  \"wb*\",\n  \"wq*\",\n  \"html\",\n  \"htm\"\n]\n  .map(function(x) {\n    return \".\" + x;\n  })\n  .join(\",\");\n"]},"metadata":{},"sourceType":"module"}