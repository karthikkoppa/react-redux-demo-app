(this["webpackJsonpreact-redux-demo-app"]=this["webpackJsonpreact-redux-demo-app"]||[]).push([[0],{21:function(e,t){},29:function(e,t,n){e.exports=n(60)},38:function(e,t,n){},44:function(e,t){},45:function(e,t){},59:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(10),l=n.n(o),c=n(2),i=n(9),s=n(26),u=n(7),d=n(1),v=function(e){switch(e){case"LIST_SURVEYS":return Promise.resolve({response:""});default:return Promise.resolve({})}},h=function(e){return{type:"ADD_ROW",after:e}},p=function(){return{type:"VALIDATE_CELLS"}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.index,n=void 0===t?-1:t,a=e.value,r=void 0===a?"":a,o=(e.readOnly,e.type),l=void 0===o?"text":o,c={id:Math.random(),type:l,value:r,readOnly:!1};return"image"===r||"category"===r||"description"===r||"collection"===r||"avlble"===r?(c.readOnly=!0,c.index=n):c.index=n,c},b={headers:[{id:1,type:"text",value:"image",readOnly:!0,image:!0},{id:2,type:"text",value:"category",readOnly:!0},{id:3,type:"text",value:"description",readOnly:!0},{id:4,type:"text",value:"collection",readOnly:!0},{id:5,type:"text",value:"avlble",readOnly:!0},{id:6,type:"button",value:"count",count:!0}],rows:[],surveys:[],selectedRows:[]},f=Object(i.c)({table:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_COLUMN":var n=t.after,a=m(),r=Object(d.a)(e.headers).slice(0,n+1),o=Object(d.a)(e.headers).slice(n+1),l=[].concat(Object(d.a)(r),[a],Object(d.a)(o)),c=e.rows.map((function(e){var t=m(),a=Object(d.a)(e).slice(0,n+1),r=Object(d.a)(e).slice(n+1);return[].concat(Object(d.a)(a),[t],Object(d.a)(r))}));return Object(u.a)({},e,{headers:l,rows:c});case"DELETE_COLUMN":var i=t.column,s=void 0===i?0:i,v=Object(d.a)(e.headers).slice(0,s),h=Object(d.a)(e.headers).slice(s+1),p=[].concat(Object(d.a)(v),Object(d.a)(h)),f=e.rows.map((function(e){var t=Object(d.a)(e).slice(0,s),n=Object(d.a)(e).slice(s+1);return[].concat(Object(d.a)(t),Object(d.a)(n))}));return Object(u.a)({},e,{headers:p,rows:f});case"ADD_ROW":var O=t.after,y=void 0===O?0:O,E=e.headers.map((function(t){var n="Survey"===t.value,a=n?"survey":"text",r=n&&1===e.surveys.length?e.surveys[0].name:"";return m({type:a,value:r})})),j=[E],w=Object(d.a)(e.rows).slice(0,y),g=Object(d.a)(e.rows).slice(y),C=[].concat(Object(d.a)(w),j,Object(d.a)(g));return Object(u.a)({},e,{rows:C});case"DELETE_ROW":var k=t.row,x=Object(d.a)(e.rows).slice(0,k),S=Object(d.a)(e.rows).slice(k+1);return Object(u.a)({},e,{rows:[].concat(Object(d.a)(x),Object(d.a)(S))});case"UPDATE_CELL":var L=t.row,R=t.column,A=t.value;if("undefined"!==typeof L){var D=JSON.parse(JSON.stringify(e.rows)),N=JSON.parse(JSON.stringify(e.selectedRows));return 5===R&&(A=""===D[L][R].value?1:parseInt(D[L][R].value)+1,N[L]=D[L]),D[L][R].value=A,Object(u.a)({},e,{rows:D,selectedRows:N})}var T=e.headers.map((function(e,t){return t===R&&(e.value=A),e}));return Object(u.a)({},e,{headers:T});case"SET_TABLE":var _=t.rows,M=_[0],I=_.slice(1),U=M.map((function(e,t){return m({value:e,index:t})})),B=[],F=U.find((function(e){return"additional_image"===e.value}));F&&B.push(m({value:"image",readOnly:!0,index:F.index}));var J=U.find((function(e){return"category"===e.value}));J&&B.push(m({value:"category",readOnly:!0,index:J.index}));var P=U.find((function(e){return"description"===e.value}));P&&B.push(m({value:"description",readOnly:!0,index:P.index}));var V=U.find((function(e){return"collection"===e.value}));V&&B.push(m({value:"collection",readOnly:!0,index:V.index}));var W=U.find((function(e){return"avlble"===e.value}));W&&B.push(m({value:"avlble",readOnly:!0,index:W.index})),B.push(m({value:"count",readOnly:!0,index:-1}));for(var K=[],Y=0;Y<I.length;Y++){var q=null;if(1e3===Y)break;for(var H=[],X=0;X<B.length;X++){var $=B[X].index,z="text",G=$>=0?I[Y][$]:"";"avlble"===B[X].value&&0===G?q=!0:q||(q=!1,H.push(m({type:z,value:G})))}q||K.push(H)}return Object(u.a)({},e,{headers:B,rows:K});case"VALIDATE_CELLS":var Q=e.headers,Z=e.rows,ee=Z.map((function(e){return e.map((function(e,t){if(Q[t].validate){var n=Q[t].validate(e.value),a=Object(u.a)({},e);return a.errors=n?[]:["Number not valid"],a}return e}))}));return Object(u.a)({},e,{rows:ee});case"PARSE_CELLS":var te=e.headers,ne=e.rows,ae=ne.map((function(e){return e.map((function(e,t){if(te[t].parse&&Array.isArray(e.errors)&&0===e.errors.length){var n=JSON.parse(JSON.stringify(e));return n.value=te[t].parse(n.value),n}return e}))}));return Object(u.a)({},e,{rows:ae});case"LIST_SURVEYS":return Object(u.a)({},e,{surveys:t.surveys});default:return e}}}),O={},y=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d,E=n(3),j=n(4),w=n(5),g=n(6),C=(n(38),n(8)),k=n(18),x=n.n(k),S=function(e){Object(g.a)(n,e);var t=Object(w.a)(n);function n(e){var a;return Object(E.a)(this,n),(a=t.call(this,e)).handleFile=a.handleFile.bind(Object(C.a)(a)),a}return Object(j.a)(n,[{key:"handleFile",value:function(e){var t=this,n=new FileReader,a=!!n.readAsBinaryString;n.onload=function(e){var n=e.target.result,r=x.a.read(n,{type:a?"binary":"array"}),o=r.SheetNames[0],l=r.Sheets[o],c=x.a.utils.sheet_to_json(l,{header:1});t.props.setTable(c)},a?n.readAsBinaryString(e):n.readAsArrayBuffer(e)}},{key:"render",value:function(){return r.a.createElement(A,{handleFile:this.handleFile})}}]),n}(r.a.Component),L={setTable:function(e){return function(t){t({type:"SET_TABLE",rows:e})}}},R=Object(c.b)(null,L)(S),A=function(e){Object(g.a)(n,e);var t=Object(w.a)(n);function n(e){var a;return Object(E.a)(this,n),(a=t.call(this,e)).handleChange=a.handleChange.bind(Object(C.a)(a)),a.fileInput=r.a.createRef(),a}return Object(j.a)(n,[{key:"handleChange",value:function(e){var t=e.target.files;t&&t[0]&&this.props.handleFile(t[0])}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{style:{marginLeft:10},onClick:function(){return e.fileInput.current.click()}},r.a.createElement("i",{className:"fas fa-upload"}),"\xa0 Upload & Publish"),r.a.createElement("input",{ref:this.fileInput,type:"file",hidden:!0,accept:D,onChange:this.handleChange}))}}]),n}(r.a.Component),D=["xlsx","xlsb","xlsm","xls","xml","csv","txt","ods","fods","uos","sylk","dif","dbf","prn","qpw","123","wb*","wq*","html","htm"].map((function(e){return"."+e})).join(","),N=n(27),T=n.n(N),_={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}};var M=Object(c.b)((function(e){return{selectedRows:e.table.selectedRows}}),null)((function(e){return r.a.createElement("div",null,r.a.createElement(T.a,{isOpen:e.isOpen,onRequestClose:e.closeModal,style:_,contentLabel:"Example Modal"},r.a.createElement("div",null,"selected rows"),r.a.createElement("ul",null,e.selectedRows&&e.selectedRows.map((function(e){return r.a.createElement("li",null,e[2].value)}))),r.a.createElement("button",{onClick:e.closeModal},"close")))})),I=function(e){Object(g.a)(n,e);var t=Object(w.a)(n);function n(e){var a;return Object(E.a)(this,n),(a=t.call(this,e)).showModal=function(){a.setState({isOpen:!0})},a.closeModal=function(){a.setState({isOpen:!1})},a.state={value:e.value,isOpen:!1},a}return Object(j.a)(n,[{key:"onChange",value:function(e){this.setState({value:e.target.value})}},{key:"onClick",value:function(e){this.props.onChange(e)}},{key:"onBlur",value:function(e){this.props.onChange&&this.props.onChange(e)}},{key:"render",value:function(){this.props.column;var e=this.props.readOnly?"read-only":"editable";return r.a.createElement("div",{key:this.props.id,className:e},r.a.createElement(M,{closeModal:this.closeModal,isOpen:this.state.isOpen}),void 0!=this.props.count&&5===this.props.column&&r.a.createElement("button",{onClick:this.showModal.bind(this)},"view ",this.props.count),5===this.props.column&&void 0==this.props.count&&r.a.createElement("button",{onClick:this.onClick.bind(this)},"whitelist"),"button"!==this.props.type&&r.a.createElement("input",{onChange:this.onChange.bind(this),onBlur:this.onBlur.bind(this),value:this.state.value,readOnly:this.props.readOnly,disabled:this.props.readOnly}))}}]),n}(r.a.Component),U=function(e){Object(g.a)(n,e);var t=Object(w.a)(n);function n(e){var a;return Object(E.a)(this,n),(a=t.call(this,e)).state={lastKey:null,mouseOver:!1},a.onTab=a.onTab.bind(Object(C.a)(a)),a.onKeyDown=a.onKeyDown.bind(Object(C.a)(a)),a.onMouseEnter=a.onMouseEnter.bind(Object(C.a)(a)),a.onMouseLeave=a.onMouseLeave.bind(Object(C.a)(a)),a.onChange=a.onChange.bind(Object(C.a)(a)),a}return Object(j.a)(n,[{key:"onChange",value:function(e){var t=e.target.value;this.props.onCellChange&&this.props.onCellChange(this.props.row,this.props.column,t)}},{key:"onTab",value:function(){this.props.isLastCell&&this.props.onAddRow(this.props.row+1)}},{key:"onKeyDown",value:function(e){"Tab"===e.key&&"Shift"!==this.state.lastKey&&this.onTab(),this.setState({lastKey:e.key})}},{key:"onMouseEnter",value:function(e){this.setState({mouseOver:!0})}},{key:"onMouseLeave",value:function(e){this.setState({mouseOver:!1})}},{key:"render",value:function(){var e=this.props,t=e.column,n=e.row,a=e.onAddColumn,o=e.onDeleteColumn,l=(e.onAddRow,e.onDeleteRow),c=e.readOnly,i=e.value,s=e.id,u=e.type,d=e.errors,v=e.isHeader,h=e.count,p=this.state.mouseOver,m=a&&p&&v,b=o&&!c&&p&&v,f=l&&p&&0===t&&!v,O=Array.isArray(d)&&d.length>0;return r.a.createElement("div",{key:"cell"+s,className:"cell "+(O?"has-errors":"")},("text"===u||"button"===u)&&r.a.createElement(I,{id:s,count:h,readOnly:c,value:i,column:t,onChange:this.onChange}),m&&r.a.createElement(V,{column:t,onAddColumn:a}),b&&r.a.createElement(P,{onDeleteColumn:o,column:t}),f&&r.a.createElement(J,{onDeleteRow:l,row:n}),!1)}}]),n}(r.a.Component),B={onAddColumn:function(e){return{type:"ADD_COLUMN",after:e}},onAddRow:h,onDeleteColumn:function(e){return{type:"DELETE_COLUMN",column:e}},onDeleteRow:function(e){return{type:"DELETE_ROW",row:e}},onCellChange:function(e,t,n){return{type:"UPDATE_CELL",row:e,column:t,value:n}}},F=Object(c.b)(null,B)(U),J=function(e){var t=e.onDeleteRow,n=e.row;return r.a.createElement("div",{className:"delete-row",onClick:function(){return t(n)}},r.a.createElement(K,null))},P=function(e){var t=e.onDeleteColumn,n=e.column;return r.a.createElement("div",{className:"delete-column",onClick:function(){return t(n)}},r.a.createElement(K,null))},V=function(e){var t=e.onAddColumn,n=e.column;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"add-column add-column-before",onClick:function(){return t(n-1)}},r.a.createElement(W,null)),r.a.createElement("div",{className:"add-column add-column-after",onClick:function(){return t(n)}},r.a.createElement(W,null)))},W=function(){return r.a.createElement(r.a.Fragment,null,"+")},K=function(){return r.a.createElement(r.a.Fragment,null,"x")},Y=function(e){Object(g.a)(n,e);var t=Object(w.a)(n);function n(){return Object(E.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"header"},this.props.headers.map((function(t,n){return r.a.createElement(F,Object.assign({count:e.props.selectedRows.length},t,{isHeader:!0,key:t.id,column:n}))})))}}]),n}(r.a.Component),q=Object(c.b)((function(e){var t=e.table;return{headers:t.headers,selectedRows:t.selectedRows}}),null)(Y),H=function(e){var t=e.row,n=e.cells,a=e.isLastRow;return r.a.createElement("div",{className:"row"},n.length?n.map((function(e,o){return r.a.createElement(F,Object.assign({},e,{column:o,row:t,key:"".concat(t,"-").concat(o),isLastCell:a&&o===n.length-1}))})):"...")},X=n(28),$=n.n(X),z=function(){return r.a.createElement("div",{className:"post loading"},r.a.createElement("svg",{width:"80",height:"80",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid"},r.a.createElement("circle",{cx:"50",cy:"50",fill:"none",stroke:"#49d1e0",strokeWidth:"10",r:"35",strokeDasharray:"164.93361431346415 56.97787143782138",transform:"rotate(275.845 50 50)"},r.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",calcMode:"linear",values:"0 50 50;360 50 50",keyTimes:"0;1",dur:"1s",begin:"0s",repeatCount:"indefinite"}))))},G=function(e){Object(g.a)(n,e);var t=Object(w.a)(n);function n(){return Object(E.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var e=this.props.rows;return r.a.createElement("div",{className:"body"},e.length&&e.map((function(t,n){return r.a.createElement($.a,{key:n,height:100,offset:[-100,100],placeholder:r.a.createElement(z,null)},r.a.createElement(H,{cells:t,row:n,key:"row-"+n,isLastRow:n===e.length-1}))})))}}]),n}(r.a.Component),Q={addRow:h},Z=Object(c.b)((function(e){return{rows:e.table.rows}}),Q)(G),ee=function(e){Object(g.a)(n,e);var t=Object(w.a)(n);function n(){return Object(E.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"table-wrapper"},r.a.createElement("div",{className:"table"},r.a.createElement(q,null),r.a.createElement(Z,null))))}}]),n}(r.a.Component),te={addRow:h,validateCells:p},ne=Object(c.b)(null,te)(ee),ae=function(e){Object(g.a)(n,e);var t=Object(w.a)(n);function n(e){var a;return Object(E.a)(this,n),(a=t.call(this,e)).props.initialiseTable(),a}return Object(j.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(R,null),r.a.createElement(ne,null)))}}]),n}(r.a.Component),re={initialiseTable:function(){return function(e){return v("LIST_SURVEYS").then((function(t){var n=t.response;return e({type:"LIST_SURVEYS",surveys:n})})).then((function(){return e(h())}))}}},oe=Object(c.b)(null,re)(ae);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(59);var le=Object(i.e)(f,O,y(Object(i.a)(s.a))),ce=document.getElementById("root");l.a.render(r.a.createElement(c.a,{store:le},r.a.createElement(oe,null)),ce),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[29,1,2]]]);
//# sourceMappingURL=main.42b23d59.chunk.js.map